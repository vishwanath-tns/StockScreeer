# üìä Database Schema

> Complete reference for all database tables in the StockScreener project

---

## Overview

The StockScreener uses a **MySQL/MariaDB** database named `marketdata` with **15+ tables** organized into functional categories.

---

## üèõÔ∏è Core Market Data

### [[yfinance-daily-quotes]]

**Purpose:** Primary table storing daily OHLCV data from Yahoo Finance

| Column | Type | Description |
|--------|------|-------------|
| `id` | BIGINT PK | Auto-increment primary key |
| `symbol` | VARCHAR(20) | Stock/index symbol (e.g., RELIANCE.NS) |
| `date` | DATE | Trading date |
| `open` | DECIMAL(15,4) | Opening price |
| `high` | DECIMAL(15,4) | Day's highest price |
| `low` | DECIMAL(15,4) | Day's lowest price |
| `close` | DECIMAL(15,4) | Closing price |
| `volume` | BIGINT | Total traded volume |
| `adj_close` | DECIMAL(15,4) | Adjusted close |

**Stats:** ~881,552 records, 1,049 symbols

---

### [[yfinance-symbols]]

**Purpose:** Symbol master with NSE ‚Üí Yahoo Finance mapping

| Column | Type | Description |
|--------|------|-------------|
| `symbol` | VARCHAR(20) | NSE symbol |
| `yahoo_symbol` | VARCHAR(30) | Yahoo symbol |
| `name` | VARCHAR(100) | Company name |
| `symbol_type` | ENUM | INDEX, STOCK, ETF |

---

## üìÑ NSE BHAV Copy

### [[nse-equity-bhavcopy-full]]

**Purpose:** Official NSE daily BHAV copy data

| Column | Type | Description |
|--------|------|-------------|
| `trade_date` | DATE | Trading date |
| `symbol` | VARCHAR(64) | Stock symbol |
| `series` | VARCHAR(8) | Series (EQ, BE) |
| `prev_close` | DECIMAL(12,4) | Previous close |
| `open_price` | DECIMAL(12,4) | Open |
| `high_price` | DECIMAL(12,4) | High |
| `low_price` | DECIMAL(12,4) | Low |
| `close_price` | DECIMAL(12,4) | Close |
| `ttl_trd_qnty` | BIGINT | Total quantity |
| `turnover_lacs` | DECIMAL(20,4) | Turnover |
| `deliv_qty` | BIGINT | Delivery quantity |
| `deliv_per` | DECIMAL(6,2) | Delivery % |

**Primary Key:** `(trade_date, symbol, series)`

---

## üìà Advance-Decline Analysis

### [[nifty500-advance-decline]]

**Purpose:** Daily advance/decline counts for Nifty 500

| Column | Type | Description |
|--------|------|-------------|
| `trade_date` | DATE | Trading date |
| `advances` | INT | Advancing stocks |
| `declines` | INT | Declining stocks |
| `unchanged` | INT | Unchanged stocks |
| `advance_pct` | DECIMAL(5,2) | Advance % |
| `advance_decline_ratio` | DECIMAL(10,4) | A/D ratio |

**Sentiment Thresholds:**
- ‚â•70% = Very Bullish
- ‚â•55% = Bullish
- 45-55% = Neutral
- <45% = Bearish

---

## ‚ö° Intraday Data

### [[intraday-1min-candles]]

**Purpose:** 1-minute OHLCV candle data

| Column | Type | Description |
|--------|------|-------------|
| `candle_timestamp` | DATETIME | Candle time |
| `symbol` | VARCHAR(50) | Symbol |
| `open_price` | DECIMAL(12,2) | Open |
| `high_price` | DECIMAL(12,2) | High |
| `low_price` | DECIMAL(12,2) | Low |
| `close_price` | DECIMAL(12,2) | Close |
| `volume` | BIGINT | Volume |
| `status` | ENUM | ADVANCE/DECLINE/UNCHANGED |

---

## üöÄ Momentum Analysis

### [[momentum-analysis]]

**Purpose:** Multi-timeframe momentum calculations

| Duration | Days |
|----------|------|
| 1W | 7 |
| 1M | 30 |
| 3M | 90 |
| 6M | 180 |
| 9M | 270 |
| 12M | 365 |

Key metrics: `percentage_change`, `percentile_rank`, `sector_rank`

---

## üìä Trend Analysis

### [[trend-analysis]]

**Purpose:** Multi-timeframe trend direction

| Column | Values |
|--------|--------|
| `daily_trend` | UP / DOWN |
| `weekly_trend` | UP / DOWN |
| `monthly_trend` | UP / DOWN |
| `trend_rating` | -3 to +3 |

---

## üí∞ Block & Bulk Deals

### [[nse-block-deals]] / [[nse-bulk-deals]]

**Purpose:** NSE block (‚â•5 lakh shares) and bulk (‚â•0.5% equity) deals

Fields: `trade_date`, `symbol`, `client_name`, `deal_type`, `quantity`, `trade_price`

---

## üåô Vedic Astrology

### [[planetary-positions]]

**Purpose:** Minute-level planetary positions for 9 planets

| Planet | Fields |
|--------|--------|
| Sun, Moon, Mercury, Venus, Mars, Jupiter, Saturn, Rahu, Ketu | longitude, sign, degree |

**Stats:** ~1.5M records (2023-2025)

---

## üîó Related Pages

- [[project-overview]] - How tables connect
- [[api-reference]] - Querying the database
- [[troubleshooting]] - Common DB issues

---

[//begin]: # "Autogenerated link references"
[yfinance-daily-quotes]: tables/yfinance-daily-quotes.md "YFinance Daily Quotes"
[//end]: # "Autogenerated link references"
