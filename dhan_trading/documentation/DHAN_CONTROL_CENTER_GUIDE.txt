DHAN UNIFIED CONTROL CENTER - QUICK REFERENCE
==============================================

One Unified Hub for All Dhan Trading Services

LAUNCH:
-------
  python launch_dhan_control_center.py

SERVICES AVAILABLE:
-------------------

1. FNO FEED LAUNCHER
   Script: launch_fno_feed.py
   Instruments: NIFTY & BANKNIFTY Futures + Weekly Options (128 total)
   Exchange Segment: NSE_FNO
   Real-time: Yes, WebSocket feed
   Database: Quotes published to Redis
   
2. FNO+MCX FEED (Enhanced)
   Script: launch_fno_feed.py --include-commodities
   Instruments: FNO (128) + MCX Commodities (5 main)
   Commodities: GOLD, CRUDE OIL, SILVER, NATGAS, COPPER
   Exchange Segment: NSE_FNO + MCX_COMM
   Real-time: Yes, combined feed
   Database: All quotes to single Redis stream
   
3. FNO SERVICES MONITOR
   Script: launch_fno_services_monitor (via Control Center)
   Type: PyQt5 Dashboard
   Features:
     • Real-time services status
     • Quote feed visualization
     • System health metrics
     • Database statistics
     • Activity logs
   
4. FNO DATABASE WRITER
   Script: fno_db_writer.py
   Purpose: Persist quotes to MySQL
   Tables: dhan_fno_quotes (FNO + MCX)
   Batch Size: 5000 records per insert
   
5. MARKET SCHEDULER
   Script: launch_market_scheduler.py
   Purpose: Auto-start/stop all services based on market hours
   Schedule:
     • Start: 8:55 AM IST (Monday-Friday)
     • Stop: 12:00 AM (Midnight) IST
   Features:
     • System tray icon
     • Manual controls
     • Windows startup integration (optional)
   
6. INSTRUMENT DISPLAY
   Script: display_fno_instruments.py
   Purpose: Show all subscribed instruments
   Output: List with IDs, strikes, expiries, segments

TYPICAL WORKFLOWS:
------------------

WORKFLOW 1: Start Full System
  1. Launch: python launch_dhan_control_center.py
  2. Click "Start All Services"
  3. Monitor via "Services Status" tab
  4. View quotes in "Real-time Monitor" tab

WORKFLOW 2: FNO Only (No Commodities)
  1. Launch Control Center
  2. Start "FNO Feed Launcher" only
  3. Start "FNO Services Monitor" (separate window)
  4. Start "FNO Database Writer" (for persistence)

WORKFLOW 3: FNO + MCX Commodities
  1. Launch Control Center
  2. Click "Start FNO+MCX Feed"
  3. This includes:
     • NIFTY & BANKNIFTY futures/options
     • GOLD, CRUDE, SILVER, NATGAS, COPPER
  4. Monitor in "Services Status" tab

WORKFLOW 4: Scheduled Auto-Start
  1. Launch Control Center
  2. Start "Market Scheduler"
  3. Services start automatically at 8:55 AM IST
  4. Services stop automatically at 12:00 AM IST
  5. Optional: Add to Windows startup for persistence

DATABASE DETAILS:
-----------------

TABLES:
  • dhan_fno_quotes: FNO and MCX commodity quotes
    Columns: security_id, ltp, volume, bid, ask, exchange_segment, quote_time
    Indexing: security_id, exchange_segment, quote_time
    
  • dhan_fno_instruments: Reference table for all instruments
    Includes: NIFTY, BANKNIFTY, Options, MCX commodities

REDIS STREAMS:
  • dhan:quotes - Raw quote stream
  • dhan:ticks - Tick-by-tick updates
  • dhan:fno_quotes - FNO-specific quotes
  • dhan:mcx_quotes - MCX commodity quotes

MONITORING:
-----------

Real-time Status (via Control Center):
  • Services Status tab: PID, uptime, memory usage
  • Real-time Monitor tab: Live activity log
  • System Logs tab: Detailed audit trail
  • Configuration tab: All settings reference

Command Line:
  python display_fno_instruments.py  # Show instruments
  python -m dhan_trading.dashboard.fno_services_monitor  # Dashboard only

PERFORMANCE:
------------

Typical Metrics:
  FNO Feed Launcher: <0.2% CPU, 80-120 MB memory
  Database Writer: <0.1% CPU, 50-80 MB memory
  Monitor Dashboard: 2-5% CPU (GUI), 150-200 MB memory
  Total Memory: ~250-400 MB for full system
  
Quote Rate:
  FNO Only: 1000+ quotes/sec
  FNO+MCX: 1200+ quotes/sec (with commodities)

TROUBLESHOOTING:
----------------

If "FNO Feed Launcher" shows OFFLINE:
  1. Check MySQL connection (dhan_instruments table)
  2. Check Redis server is running
  3. Check Dhan API credentials in environment variables
  4. View logs in "System Logs" tab

If database not receiving quotes:
  1. Verify "FNO Database Writer" is RUNNING
  2. Check MySQL marketdata database exists
  3. Check dhan_fno_quotes table exists
  4. View writer logs for errors

If Market Scheduler not auto-starting:
  1. Set to "Running" status in Control Center
  2. Optionally install to Windows startup:
     python launch_market_scheduler.py --install-startup

SECURITY NOTES:
---------------

Environment Variables (in .env):
  DHAN_CLIENT_ID=xxxxx
  DHAN_ACCESS_TOKEN=xxxxx
  MYSQL_HOST=localhost
  MYSQL_USER=root
  MYSQL_PASSWORD=xxxxx
  MYSQL_DB=marketdata
  REDIS_HOST=localhost
  REDIS_PORT=6379

NEXT STEPS:
-----------

1. Launch: python launch_dhan_control_center.py
2. Click "Start All Services"
3. Monitor in "Services Status" tab
4. View live quotes in "Real-time Monitor"
5. Check database tables filling with data
6. For MCX, use "FNO+MCX Feed" option

DOCUMENTATION:
---------------

Architecture: FNO_FEED_ARCHITECTURE.md
Implementation: FNO_IMPLEMENTATION_COMPLETE.txt
Deployment: FNO_DEPLOYMENT_READY.txt
Quick Start: FNO_QUICK_START.txt

Questions? Check the logs in Control Center or view system logs for detailed diagnostics.
